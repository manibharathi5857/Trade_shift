<div class="portfolio-container">
  <h2 class="section-title">Your Portfolio</h2>

  <!-- ðŸ’° Cash Balance -->
  <div class="balance-box">
    <strong>ðŸ’° Cash Balance: {{ liveGoldUpdate }}</strong>
    <span>{{ portfolio?.cashBalance | currency: 'USD' }}</span>
  </div>

  <!-- ðŸŸ¢ Live Market Update -->
  <div class="live-section">
    <h3>Live Gold Update</h3>
    <p [style.color]="priceColor">{{ liveUpdate }}</p>
  </div>

  <!-- ðŸ“Š Portfolio Chart -->
  <div class="chart-section">
    <h3>ðŸ“ˆ Portfolio Distribution</h3>

    <!-- Uncomment below if chart logic exists -->
    <!--
    <div class="chart-container" *ngIf="portfolio?.holdings?.length > 0; else noChartData">
      <canvas id="portfolioChart"></canvas>
    </div>
    -->

    <ng-template #noChartData>
      <p class="no-data-text">No data available to display chart.</p>
    </ng-template>
  </div>

  <!-- ðŸ§¾ Holdings (from getId button click) -->
  <h3 class="section-title">ðŸ“Š Selected User Holdings</h3>

  <div class="holdings-container" *ngIf="assetData.length > 0; else noHoldings">
    <div class="holding-card" *ngFor="let h of assetData">
      <div class="holding-symbol">
        <span class="symbol-text">{{ h.symbol | uppercase }}</span>
      </div>
      <div class="holding-details">
        <span class="label">Quantity:</span>
        <span class="value">{{ h.quantity }}</span>
      </div>
    </div>
  </div>

  <ng-template #noHoldings>
    <p class="no-holdings">No holdings found for this user.</p>
  </ng-template>

  <!-- âš™ï¸ Trade Form -->
  <div class="trade-section">
    <h3>Place Trade</h3>
    <div class="trade-inputs">
      <input type="text" placeholder="Symbol" [(ngModel)]="tradeSymbol">
      <input type="number" placeholder="Quantity" [(ngModel)]="tradeQuantity">
      <input type="number" placeholder="Price" [(ngModel)]="tradePrice">
    </div>
    <div class="trade-buttons">
      <button class="buy-btn" (click)="buyAsset()">Buy</button>
      <button class="sell-btn" (click)="sellAsset()">Sell</button>
    </div>
    <p class="trade-status">{{ tradeStatus }}</p>
  </div>

  <!-- ðŸ“‹ Transactions Section -->
  <div class="transactions-section">
    <h3>ðŸ§¾ Transactions</h3>

    <!-- ðŸŸ¢ BUY Transactions -->
    <div class="buy-transactions">
      <h4>ðŸŸ¢ Buy Transactions</h4>
      <table class="transactions-table" *ngIf="buyTransactions?.length > 0; else noBuys">
        <thead>
          <tr>
            <th>ID</th>
            <th>Type</th>
            <th>Symbol</th>
            <th>Qty</th>
            <th>Price</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let tx of buyTransactions">

            <td>{{ tx.id }}</td>
            <td class="buy">{{ tx.type }}</td>
            <td>{{ tx.symbol }}</td>
            <td>{{ tx.quantity }}</td>
            <td>{{ tx.price | number:'1.2-2' }}</td>
            <td>{{ tx.timestamp | date:'short' }}</td>
          </tr>
        </tbody>
      </table>
      <ng-template #noBuys>
        <p class="no-data-text">No Buy Transactions Found.</p>
      </ng-template>
    </div>

    <!-- ðŸ”´ SELL Transactions -->
    <div class="sell-transactions" style="margin-top: 30px;">
      <h4>ðŸ”´ Sell Transactions</h4>
      <table class="transactions-table" *ngIf="sellTransactions?.length > 0; else noSells">
        <thead>
          <tr>
            <th>ID</th>
            <th>Type</th>
            <th>Symbol</th>
            <th>Qty</th>
            <th>Price</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let tx of sellTransactions">

            <td>{{ tx.id }}</td>
            <td class="sell">{{ tx.type }}</td>
            <td>{{ tx.symbol }}</td>
            <td>{{ tx.quantity }}</td>
            <td>{{ tx.price | number:'1.2-2' }}</td>
            <td>{{ tx.timestamp | date:'short' }}</td>
          </tr>
        </tbody>
      </table>
      <ng-template #noSells>
        <p class="no-data-text">No Sell Transactions Found.</p>
      </ng-template>
    </div>
  </div>
</div>
